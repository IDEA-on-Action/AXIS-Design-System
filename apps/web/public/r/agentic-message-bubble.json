{
  "$schema": "https://ui.shadcn.com/schema/registry-item.json",
  "name": "agentic-message-bubble",
  "type": "registry:ui",
  "title": "Message Bubble",
  "description": "대화 메시지 버블 컴포넌트 (user/assistant/system)",
  "dependencies": [],
  "registryDependencies": [],
  "files": [
    {
      "path": "components/agentic/message-bubble.tsx",
      "type": "registry:ui",
      "content": "import * as React from \"react\";\nimport { cn } from \"@axis-ds/ui-react\";\nimport { MESSAGE_ROLE_LABELS } from \"../constants/a11y-labels\";\n\nexport type MessageRole = \"user\" | \"assistant\" | \"system\";\nexport type MessageStatus = \"sending\" | \"sent\" | \"error\";\n\nexport interface MessageBubbleProps {\n  /** 메시지 역할 */\n  role: MessageRole;\n  /** 메시지 내용 */\n  content: React.ReactNode;\n  /** 타임스탬프 */\n  timestamp?: Date;\n  /** 아바타 (ReactNode 또는 이미지 URL) */\n  avatar?: React.ReactNode | string;\n  /** 전송 상태 */\n  status?: MessageStatus;\n  /** 하단 액션 영역 */\n  actions?: React.ReactNode;\n  /** 메타데이터 (모델명 등) */\n  metadata?: string;\n  /** 추가 클래스 */\n  className?: string;\n}\n\nconst roleStyles: Record<MessageRole, { container: string; bubble: string }> = {\n  user: {\n    container: \"flex-row-reverse\",\n    bubble: \"bg-[var(--axis-color-blue-500)] text-white rounded-br-sm\",\n  },\n  assistant: {\n    container: \"flex-row\",\n    bubble: \"bg-[var(--axis-surface-secondary)] text-[var(--axis-text-primary)] rounded-bl-sm\",\n  },\n  system: {\n    container: \"justify-center\",\n    bubble: \"bg-[var(--axis-surface-tertiary)] text-[var(--axis-text-secondary)] text-xs italic\",\n  },\n};\n\nconst statusIcons: Record<MessageStatus, React.ReactNode> = {\n  sending: (\n    <svg className=\"w-3 h-3 animate-spin\" viewBox=\"0 0 24 24\" fill=\"none\">\n      <circle className=\"opacity-25\" cx=\"12\" cy=\"12\" r=\"10\" stroke=\"currentColor\" strokeWidth=\"4\" />\n      <path className=\"opacity-75\" fill=\"currentColor\" d=\"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4z\" />\n    </svg>\n  ),\n  sent: (\n    <svg className=\"w-3 h-3\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n      <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M5 13l4 4L19 7\" />\n    </svg>\n  ),\n  error: (\n    <svg className=\"w-3 h-3\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n      <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M12 8v4m0 4h.01\" />\n    </svg>\n  ),\n};\n\n/**\n * 대화 메시지 버블 컴포넌트\n */\nexport function MessageBubble({\n  role,\n  content,\n  timestamp,\n  avatar,\n  status,\n  actions,\n  metadata,\n  className,\n}: MessageBubbleProps) {\n  const roleLabel = MESSAGE_ROLE_LABELS[role];\n\n  const renderAvatar = () => {\n    if (!avatar) return null;\n    if (typeof avatar === \"string\") {\n      return (\n        <img\n          src={avatar}\n          alt=\"\"\n          aria-hidden=\"true\"\n          className=\"w-8 h-8 rounded-full object-cover flex-shrink-0\"\n        />\n      );\n    }\n    return <div className=\"flex-shrink-0\">{avatar}</div>;\n  };\n\n  return (\n    <div\n      role=\"article\"\n      aria-label={`${roleLabel} 메시지`}\n      className={cn(\"flex items-start gap-2\", roleStyles[role].container, className)}\n    >\n      {role !== \"system\" && renderAvatar()}\n      <div className={cn(\"max-w-[80%]\", role === \"system\" && \"max-w-full\")}>\n        <div\n          className={cn(\n            \"rounded-lg px-3 py-2\",\n            roleStyles[role].bubble\n          )}\n        >\n          <div className=\"text-sm whitespace-pre-wrap\">{content}</div>\n        </div>\n        <div className=\"flex items-center gap-2 mt-1 px-1\">\n          {timestamp && (\n            <time\n              dateTime={timestamp.toISOString()}\n              className=\"text-xs text-[var(--axis-text-tertiary)]\"\n            >\n              {timestamp.toLocaleTimeString(\"ko-KR\", { hour: \"2-digit\", minute: \"2-digit\" })}\n            </time>\n          )}\n          {metadata && (\n            <span className=\"text-xs text-[var(--axis-text-tertiary)]\">{metadata}</span>\n          )}\n          {status && (\n            <span\n              className={cn(\n                \"text-[var(--axis-text-tertiary)]\",\n                status === \"error\" && \"text-[var(--axis-text-error)]\"\n              )}\n              aria-label={status === \"sending\" ? \"전송 중\" : status === \"sent\" ? \"전송됨\" : \"전송 실패\"}\n            >\n              {statusIcons[status]}\n            </span>\n          )}\n        </div>\n        {actions && <div className=\"mt-1\">{actions}</div>}\n      </div>\n    </div>\n  );\n}\n"
    }
  ]
}