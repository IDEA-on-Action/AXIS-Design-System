# External Scout Agent - 세미나 메타데이터 추출 정확성
# 세미나 URL에서 메타데이터를 정확하게 추출하는지 테스트

task:
  id: external_scout_seminar_metadata
  type: workflow
  desc: "세미나 메타데이터 추출 정확성 - URL에서 제목, 일시, 주최, 테마를 정확히 추출하는지 검증"
  suite: external_scout_regression
  version: "1.0.0"

  metadata:
    domain: data_quality
    difficulty: medium
    risk: low
    purpose: regression
    expected_pass_rate: 0.95
    owner: "ax-bd-team"
    created_at: "2026-01-18"

  inputs:
    prompt: |
      다음 세미나 URL에서 메타데이터를 추출하세요:
      - URL: https://event.example.com/ai-finance-summit-2026

      추출해야 할 필드:
      1. title (세미나 제목)
      2. date (일시)
      3. organizer (주최자)
      4. description (설명)
      5. themes (관련 테마 목록)

      Activity JSON 형식으로 결과를 출력하세요.
    context:
      source_type: "seminar"
      play_id: "EXT_Desk_D01_Seminar"
      mock_page_content:
        title: "AI Finance Summit 2026"
        date: "2026-03-15"
        organizer: "금융AI협회"
        description: "금융 분야 AI 활용 사례 공유"
        themes: ["AI", "금융", "자동화"]

  success_criteria:
    description: "필수 메타데이터 필드가 모두 추출됨"
    outcome_checks:
      - type: state_equals
        target: "output.activity.title"
        value: "AI Finance Summit 2026"
        description: "제목 정확히 추출"
      - type: state_equals
        target: "output.activity.date"
        value: "2026-03-15"
        description: "일시 정확히 추출"

  graders:
    - type: state_check
      id: metadata_completeness
      weight: 0.5
      required: true
      description: "메타데이터 완전성 검증"
      config:
        checks:
          - type: state_equals
            target: "output.activity.title"
            expected: "AI Finance Summit 2026"
            description: "제목 추출"
          - type: state_equals
            target: "output.activity.date"
            expected: "2026-03-15"
            description: "일시 추출"
          - type: state_equals
            target: "output.activity.organizer"
            expected: "금융AI협회"
            description: "주최자 추출"
          - type: state_equals
            target: "output.activity.themes"
            expected: ["AI", "금융", "자동화"]
            operator: contains
            description: "테마 추출"

    - type: regex_match
      id: schema_validation
      weight: 0.3
      description: "Activity JSON 스키마 검증"
      config:
        patterns:
          - pattern: '"activity_id":\s*"ACT-[A-Z0-9-]+"'
            target: output
            description: "activity_id 형식 검증"
          - pattern: '"play_id":\s*"EXT_Desk_D01"'
            target: output
            description: "play_id 존재 확인"

    - type: transcript_metrics
      id: efficiency
      weight: 0.2
      description: "추출 효율성"
      config:
        thresholds:
          max_turns: 5
          max_tool_calls: 10

  scoring:
    mode: weighted
    pass_threshold: 0.85
    required_graders:
      - metadata_completeness

  timeout:
    total_seconds: 120
    per_turn_seconds: 30
    grading_seconds: 30

  tags:
    - external_scout
    - metadata
    - regression
    - seminar
