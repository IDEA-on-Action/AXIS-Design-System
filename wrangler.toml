# Cloudflare Pages 설정 - @cloudflare/next-on-pages
name = "ax-discovery-portal"
compatibility_date = "2024-01-01"
compatibility_flags = ["nodejs_compat"]

# next-on-pages 빌드 출력 디렉토리
pages_build_output_dir = "apps/web/out"

# D1 Database 바인딩
[[d1_databases]]
binding = "DB"
database_name = "ax-discovery-db"
database_id = "631b77f1-274d-4254-ba42-53b5cec41408"

# 환경 변수 (프로덕션)
[vars]
ENVIRONMENT = "production"
NEXT_PUBLIC_API_URL = "https://ax-discovery-api.onrender.com"

# 프로덕션 환경 설정
[env.production]
name = "ax-discovery-portal"

[env.production.vars]
ENVIRONMENT = "production"
NEXT_PUBLIC_API_URL = "https://ax-discovery-api.onrender.com"

[[env.production.d1_databases]]
binding = "DB"
database_name = "ax-discovery-db"
database_id = "631b77f1-274d-4254-ba42-53b5cec41408"

# 프리뷰/스테이징 환경 설정
[env.preview]
name = "ax-discovery-portal-preview"

[env.preview.vars]
ENVIRONMENT = "preview"
